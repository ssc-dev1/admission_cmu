<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <template id="all_merit" name="All Merit">
        <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css"/>
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.css"/>
        <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.js"></script>
        <script>
            $(document).ready( function () {

                $('#merit_table').find('table').each(function(index,elem){
                    $(elem).DataTable();
                })

              $('#merit_table').children('div').each(function(index,elem){
                $(elem).hide()
              })

              $('#merit_list_select').on('change',function(){
                merit_list=$('#merit_list_select').val()
                $('#merit_table').children('div').hide()
                $('#merit_table').find('#' + merit_list).show()
                
            })
          



            } );

        </script>
        <nav style='background-color:#875a7b' class="navbar navbar-light">
            <div class="container-fluid">
                <a class="navbar-brand">
                    <t t-esc="company"/>
                </a>
                <form class="d-flex">
                    
                    <select class="form-control " id="merit_list_select" name="merit_list_select">
                        <option disabled='1' selected='1' value=''>Select Merit List</option>
                        <t t-foreach="merit_register" t-as="merit">
                            <option t-att-value='merit.name' >
                                <t t-esc="merit.name"/>
                            </option>
                        </t>
                    </select>
                </form>
            </div>
        </nav>
        <div id='merit_table' class="container my-5">
            <t t-foreach="merit_register" t-as="merit">
                <div t-att-id='merit.name'>

                    <table t-att-id="merit.id" class="table table-striped table-bordered">
                        <thead>
                            <tr style='background-color:#c57bb1'>
                                <th>Application No</th>
                                <th>Name</th>
                                <th>Program</th>
                                <th>Merit No</th>
                                <th>Aggregate</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- <t t-esc="merit"/> -->
                            <t t-foreach="merit.merit_lines" t-as="m">
                                <t t-if="m.public_visible">
                                    
                                    <td></td>
                                    <tr>
                                        <td><t t-esc="m.applicant_id.application_no"/></td>
                                        <td><t t-esc="m.applicant_id.first_name if m.applicant_id.first_name else ''"/> <t t-esc="m.applicant_id.last_name if m.applicant_id.last_name else ''"/></td>
                                        <td><t t-esc="program_id.name if m.program_id else ''"/></td>
                                        <td><t t-esc="m.merit_no if m.merit_no else ''"/></td>
                                        <td><t t-esc="m.aggregate if m.aggregate else ''"/></td>
                                    </tr>
                                </t>
                            </t>
                           
                        </tbody>
                    </table>
                </div>
            </t>

        </div>

    </template>
</odoo>