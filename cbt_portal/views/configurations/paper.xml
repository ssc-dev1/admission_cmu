<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_cbt_subject_tree" model="ir.ui.view">
        <field name="name">cbt.subject.export.tree</field>
        <field name="model">cbt.subject.export</field>
        <field name="arch" type="xml">
            <tree editable="bottom" string="Paper Subjects">
                <field name="name"/>
            </tree>
        </field>
    </record>

    
<record id="cbt_paper_export_action_server" model="ir.actions.server">
    <field name="name">Logout All</field>
    <field name="model_id" ref="cbt_portal.model_cbt_paper_export"/>
    <field name="binding_model_id" ref="cbt_portal.model_cbt_paper_export"/>
    <field name="state">code</field>
    <field name="code">model.kill_all_user()</field>
</record>

    <record id="view_cbt_paper_tree" model="ir.ui.view">
        <field name="name">cbt.paper.export.tree</field>
        <field name="model">cbt.paper.export</field>
        <field name="arch" type="xml">
            <tree default_order='test_date desc' string="Papers" decoration-warning='end_paper == False' decoration-danger="paper_draft == True" decoration-success="paper_draft == False and end_paper == True" >
                <field name="login"/>
                <field name="paper_draft" invisible="1" />
                <field name="end_paper" invisible="1" />
                <field name="name"/>
                <field name="program" optional="show"/>
                <field name="test_center" optional="show"/>
                <field name="test_date" optional="show"/>
                <field name="test_time" optional="show"/>
                <field name="test_duration" optional="show"/>
                <field name="time_remaining" optional="show"/>
                <!-- <field name="answered_q" optional="show"/>
                <field name="reviewed_q" optional="show"/> -->
                <field name="paper_started" optional="show"/>
                <field name="end_paper_time" optional="hide"/>
                <field name="last_session_token" optional="hide"/>
                <field name="is_login"/>

            </tree>
        </field>
    </record>
    <record id="view_cbt_paper_form" model="ir.ui.view">
        <field name="name">cbt.paper.export.form</field>
        <field name="model">cbt.paper.export</field>
        <field name="arch" type="xml">
            <form string="Paper">
                 <header>
                     <button name="clear" string="Clear Session" type="object" class="oe_highlight"/>
                     <button name="kill_session" string="Kill Session" type="object" class="oe_highlight"/>
                     <button name="restore" string="Restore Session" type="object" class="oe_highlight"
                        attrs="{'invisible': [('end_paper','=',False)]}"/>
                 </header>
                <sheet>
                    <!--<widget name="web_ribbon" title="SDGs" bg_color="bg-primary"/>-->
                    <field name="end_paper" invisible="1"/>
                    <group>
                        <group>
                            <field name="login"/>
                            <field name="name"/>
                            <field name="paper_name"/>
                            <field name="program"/>
                        </group>

                        <group>
                            <field name="test_center"/>
                            <field name="test_date"/>
                            <field name="test_time" widget="float_time"/>
                            <field name="test_duration"/>
                            <field name="shuffle_section"/>
                        </group>
                        <group>
                            <field name="paper_started"/>
                            <field name="end_paper_time"/>
                            <field name="last_session_id"/>
                            <field name="last_session_token"/>
                        </group>
                    </group>

                    <notebook>
                        <page name="Questions" string="Questions">
                            <field name="line_ids">
                                <tree>
                                    <field name="subject_id"/>
                                    <field name="name"/>
                                    <field name="answer"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="action_cbt_paper_list" model="ir.actions.act_window">
        <field name="name">Paper</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">cbt.paper.export</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">Click to create new record.</p>
        </field>
    </record>
    <record id="action_cbt_subject" model="ir.actions.act_window">
        <field name="name">Subject</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">cbt.subject.export</field>
        <field name="view_mode">tree</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">Click to create new record.</p>
        </field>
    </record>


</odoo>
